---
title: 在 Microsoft Graph 中处理服务通信 API
description: 可以使用 Microsoft 服务通信 API 访问Graph运行状况和消息中心帖子Microsoft 服务"。
author: payiAzure
localization_priority: Normal
ms.prod: service-communications
doc_type: resourcePageType
ms.openlocfilehash: 1c5690d3cb7eafa6a4914b22687993a1e145cc0a
ms.sourcegitcommit: d586ddb253d27f9ccb621bd128f6a6b4b1933918
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/24/2021
ms.locfileid: "53109101"
---
# <a name="working-with-service-communications-api-in-microsoft-graph"></a><span data-ttu-id="16172-103">在 Microsoft Graph 中处理服务通信 API</span><span class="sxs-lookup"><span data-stu-id="16172-103">Working with service communications API in Microsoft Graph</span></span>
<span data-ttu-id="16172-104">服务通信 API 提供与租户订阅的 Microsoft 云服务相关的服务运行状况和消息中心帖子。</span><span class="sxs-lookup"><span data-stu-id="16172-104">The service communications API provides service health and message center posts pertaining to the Microsoft cloud services subscribed by your tenant.</span></span> <span data-ttu-id="16172-105">可以获取 Microsoft 服务实例的当前和历史 (，例如，Exchange Online服务关闭) 。</span><span class="sxs-lookup"><span data-stu-id="16172-105">You can get current and historical health data of a Microsoft service (for example, the Exchange Online service is down).</span></span> <span data-ttu-id="16172-106">在致电支持人员或花时间进行故障排除之前，你可以检查服务运行状况以确定问题是否被跟踪且正在解决。</span><span class="sxs-lookup"><span data-stu-id="16172-106">You can check the service health to determine if an issue is tracked and a resolution is in progress before calling support or spending time troubleshooting.</span></span> <span data-ttu-id="16172-107">通过消息中心帖子，你可以跟踪即将进行的更改，包括新功能、更新和 (例如，Exchange Online获取新功能) 。</span><span class="sxs-lookup"><span data-stu-id="16172-107">Message center posts let you keep track of upcoming changes, including new features, updates, and other important announcements (for example, Exchange Online is getting a new feature).</span></span>

## <a name="authorization"></a><span data-ttu-id="16172-108">Authorization</span><span class="sxs-lookup"><span data-stu-id="16172-108">Authorization</span></span>
<span data-ttu-id="16172-109">Microsoft Graph允许应用程序获得对运行状况的授权访问权限，并更改有关租户订阅的 Microsoft 云服务的通信。</span><span class="sxs-lookup"><span data-stu-id="16172-109">Microsoft Graph lets applications get authorized access to health and change communications about a Microsoft cloud service subscribed by a tenant.</span></span> <span data-ttu-id="16172-110">借助相应的委派权限或应用程序权限[](/graph/permissions-reference#service-communications-permissions)，应用可以代表登录用户或者没有租户中任何登录用户的情况下访问通信数据。</span><span class="sxs-lookup"><span data-stu-id="16172-110">With the appropriate delegated or application [permissions](/graph/permissions-reference#service-communications-permissions), your app can access the communications data on behalf of a signed-in user, or without any signed-in user in the tenant.</span></span> <span data-ttu-id="16172-111">这些权限的委派和应用程序类型都仅由管理员授予。</span><span class="sxs-lookup"><span data-stu-id="16172-111">Both delegated and application types of these permissions are granted by only an administrator.</span></span>

<span data-ttu-id="16172-112">有关访问令牌、应用注册以及委派和应用程序权限详细信息，请参阅身份验证 [和授权基础知识](/graph/auth/auth-concepts)。</span><span class="sxs-lookup"><span data-stu-id="16172-112">For more information on access tokens, app registration, and delegated and application permissions, see [Authentication and authorization basics](/graph/auth/auth-concepts).</span></span>

### <a name="access-service-communications-api-on-behalf-of-signed-in-user"></a><span data-ttu-id="16172-113">代表登录用户访问服务通信 API</span><span class="sxs-lookup"><span data-stu-id="16172-113">Access service communications API on behalf of signed-in user</span></span>

<span data-ttu-id="16172-114">代表登录用户访问服务通信 API 需要委派权限。</span><span class="sxs-lookup"><span data-stu-id="16172-114">Delegated permissions are needed to access the service communications API on behalf of a signed-in user.</span></span> <span data-ttu-id="16172-115">面向客户的画布应用程序（如 [Microsoft 365 管理中心](https://admin.microsoft.com/Adminportal/Home?source=applauncher#/homepage) (仅可供管理员角色) 访问）可以代表登录用户调用服务通信 API，获取登录用户租户的服务运行状况和服务通知 _数据。_</span><span class="sxs-lookup"><span data-stu-id="16172-115">Customer-facing canvas applications, such as the [Microsoft 365 admin center](https://admin.microsoft.com/Adminportal/Home?source=applauncher#/homepage) (accessible only to admin roles), can call the service communications API to get the service health and service announcements data for the signed-in user's tenant, _on behalf of the signed-in user_.</span></span> <span data-ttu-id="16172-116">用户可以查明其订阅的订阅服务器是否正常或是否有问题。</span><span class="sxs-lookup"><span data-stu-id="16172-116">Users can find out whether their subscribed servies are healthy or have issues.</span></span> <span data-ttu-id="16172-117">他们还可以了解影响租户的任何当前服务问题。</span><span class="sxs-lookup"><span data-stu-id="16172-117">They can also learn about any current service issues affecting their tenants.</span></span> 

### <a name="access-service-communications-api-without-user"></a><span data-ttu-id="16172-118">无需用户即可访问服务通信 API</span><span class="sxs-lookup"><span data-stu-id="16172-118">Access service communications API without user</span></span>

<span data-ttu-id="16172-119">在没有登录用户的情况下访问服务通信 API 需要应用程序权限。</span><span class="sxs-lookup"><span data-stu-id="16172-119">Application permissions are needed to access the service communications API without a signed-in user.</span></span> <span data-ttu-id="16172-120">作为后端服务（如监控或警报服务）运行的应用程序可以使用自己的标识（而不是代表用户）调用服务通信 API。</span><span class="sxs-lookup"><span data-stu-id="16172-120">Applications that run as backend services, such as monitoring or alert services, can call the service communications API with their own identity and not on behalf of a user.</span></span> <span data-ttu-id="16172-121">这些后端服务可以构建自定义监视/警报管道并调用服务通信 API，获取服务运行状况和服务通知数据。</span><span class="sxs-lookup"><span data-stu-id="16172-121">These backend services can build custom monitoring/alert pipelines and call the service communications API to get service health and service announcements data.</span></span> 


## <a name="common-use-cases-and-required-permissions"></a><span data-ttu-id="16172-122">常见用例和所需权限</span><span class="sxs-lookup"><span data-stu-id="16172-122">Common use cases and required permissions</span></span>

|<span data-ttu-id="16172-123">用例</span><span class="sxs-lookup"><span data-stu-id="16172-123">Use cases</span></span>|<span data-ttu-id="16172-124">API 请求</span><span class="sxs-lookup"><span data-stu-id="16172-124">API requests</span></span>| <span data-ttu-id="16172-125">所需权限</span><span class="sxs-lookup"><span data-stu-id="16172-125">Required permissions</span></span>| <span data-ttu-id="16172-126">支持的权限类型</span><span class="sxs-lookup"><span data-stu-id="16172-126">Supported permission types</span></span>|
|:--------|:--------|:--------|:--------|
| <span data-ttu-id="16172-127">列出租户的运行状况概述</span><span class="sxs-lookup"><span data-stu-id="16172-127">List health overviews for tenant</span></span> | [<span data-ttu-id="16172-128">列出 healthOverviews</span><span class="sxs-lookup"><span data-stu-id="16172-128">List healthOverviews</span></span>](/graph/api/serviceannouncement-list-healthoverviews?view=graph-rest-beta&preserve-view=true) | <span data-ttu-id="16172-129">_ServiceHealth.Read.All_</span><span class="sxs-lookup"><span data-stu-id="16172-129">_ServiceHealth.Read.All_</span></span> | <span data-ttu-id="16172-130">委托和应用程序</span><span class="sxs-lookup"><span data-stu-id="16172-130">Delegated and application</span></span> | 
| <span data-ttu-id="16172-131">获取租户的特定服务运行状况信息</span><span class="sxs-lookup"><span data-stu-id="16172-131">Get specific service health information for tenant</span></span> | [<span data-ttu-id="16172-132">获取 serviceHealth</span><span class="sxs-lookup"><span data-stu-id="16172-132">Get serviceHealth</span></span>](/graph/api/servicehealth-get?view=graph-rest-beta&preserve-view=true) | <span data-ttu-id="16172-133">_ServiceHealth.Read.All_</span><span class="sxs-lookup"><span data-stu-id="16172-133">_ServiceHealth.Read.All_</span></span> | <span data-ttu-id="16172-134">委托和应用程序</span><span class="sxs-lookup"><span data-stu-id="16172-134">Delegated and application</span></span> |
| <span data-ttu-id="16172-135">列出租户的所有服务问题</span><span class="sxs-lookup"><span data-stu-id="16172-135">List all service issues for tenant</span></span> | [<span data-ttu-id="16172-136">列出问题</span><span class="sxs-lookup"><span data-stu-id="16172-136">List issues</span></span>](/graph/api/serviceannouncement-list-issues?view=graph-rest-beta&preserve-view=true) | <span data-ttu-id="16172-137">_ServiceHealth.Read.All_</span><span class="sxs-lookup"><span data-stu-id="16172-137">_ServiceHealth.Read.All_</span></span> | <span data-ttu-id="16172-138">委托和应用程序</span><span class="sxs-lookup"><span data-stu-id="16172-138">Delegated and application</span></span> |
| <span data-ttu-id="16172-139">获取租户的特定服务问题</span><span class="sxs-lookup"><span data-stu-id="16172-139">Get a specific service issue for tenant</span></span> | [<span data-ttu-id="16172-140">获取问题</span><span class="sxs-lookup"><span data-stu-id="16172-140">Get issue</span></span>](/graph/api/servicehealthissue-get?view=graph-rest-beta&preserve-view=true) | <span data-ttu-id="16172-141">_ServiceHealth.Read.All_</span><span class="sxs-lookup"><span data-stu-id="16172-141">_ServiceHealth.Read.All_</span></span> | <span data-ttu-id="16172-142">委托和应用程序</span><span class="sxs-lookup"><span data-stu-id="16172-142">Delegated and application</span></span> |
| <span data-ttu-id="16172-143">获取租户的事件后审阅报告</span><span class="sxs-lookup"><span data-stu-id="16172-143">Get a post-incident review report for tenant</span></span> | [<span data-ttu-id="16172-144">获取事件报告</span><span class="sxs-lookup"><span data-stu-id="16172-144">Get incident report</span></span>](/graph/api/servicehealthissue-incidentreport?view=graph-rest-beta&preserve-view=true)| <span data-ttu-id="16172-145">_ServiceHealth.Read.All_</span><span class="sxs-lookup"><span data-stu-id="16172-145">_ServiceHealth.Read.All_</span></span> | <span data-ttu-id="16172-146">委托和应用程序</span><span class="sxs-lookup"><span data-stu-id="16172-146">Delegated and application</span></span> |
| <span data-ttu-id="16172-147">列出租户的所有服务消息</span><span class="sxs-lookup"><span data-stu-id="16172-147">List all service messages for tenant</span></span> | [<span data-ttu-id="16172-148">列出邮件</span><span class="sxs-lookup"><span data-stu-id="16172-148">List messages</span></span>](/graph/api/serviceannouncement-list-messages?view=graph-rest-beta&preserve-view=true) | <span data-ttu-id="16172-149">_ServiceMessage.Read.All_</span><span class="sxs-lookup"><span data-stu-id="16172-149">_ServiceMessage.Read.All_</span></span> | <span data-ttu-id="16172-150">委托和应用程序</span><span class="sxs-lookup"><span data-stu-id="16172-150">Delegated and application</span></span> |
| <span data-ttu-id="16172-151">获取租户的特定服务消息</span><span class="sxs-lookup"><span data-stu-id="16172-151">Get a specific service message for tenant</span></span> | [<span data-ttu-id="16172-152">获取邮件</span><span class="sxs-lookup"><span data-stu-id="16172-152">Get message</span></span>](/graph/api/serviceupdatemessage-get?view=graph-rest-beta&preserve-view=true) | <span data-ttu-id="16172-153">_ServiceMessage.Read.All_</span><span class="sxs-lookup"><span data-stu-id="16172-153">_ServiceMessage.Read.All_</span></span> | <span data-ttu-id="16172-154">委托和应用程序</span><span class="sxs-lookup"><span data-stu-id="16172-154">Delegated and application</span></span> |
| <span data-ttu-id="16172-155">更新已登录用户的服务消息状态</span><span class="sxs-lookup"><span data-stu-id="16172-155">Update service message status for signed in user</span></span> | <span data-ttu-id="16172-156">有关状态操作的列表，请参阅 [serviceUpdateMessage](/graph/api/resources/serviceupdatemessage?view=graph-rest-beta&preserve-view=true)。</span><span class="sxs-lookup"><span data-stu-id="16172-156">For a list of status operations, see [serviceUpdateMessage](/graph/api/resources/serviceupdatemessage?view=graph-rest-beta&preserve-view=true).</span></span>| <span data-ttu-id="16172-157">_ServiceMessageViewpoint.Write_</span><span class="sxs-lookup"><span data-stu-id="16172-157">_ServiceMessageViewpoint.Write_</span></span> | <span data-ttu-id="16172-158">委派</span><span class="sxs-lookup"><span data-stu-id="16172-158">Delegated</span></span> |

## <a name="whats-new"></a><span data-ttu-id="16172-159">最近更新</span><span class="sxs-lookup"><span data-stu-id="16172-159">What's new</span></span>
<span data-ttu-id="16172-160">了解此 API 集的[最新功能和更新](/graph/whats-new-overview)。</span><span class="sxs-lookup"><span data-stu-id="16172-160">Find out about the [latest new features and updates](/graph/whats-new-overview) for this API set.</span></span>

## <a name="next-steps"></a><span data-ttu-id="16172-161">后续步骤</span><span class="sxs-lookup"><span data-stu-id="16172-161">Next steps</span></span>

<span data-ttu-id="16172-162">服务通信 API 可以开启与用户互动的新方式：</span><span class="sxs-lookup"><span data-stu-id="16172-162">The service communications API can open up new ways for you to engage with users:</span></span>

- [<span data-ttu-id="16172-163">访问 Microsoft 服务中的服务运行状况和通信Graph</span><span class="sxs-lookup"><span data-stu-id="16172-163">Overview for accessing service health and communications in Microsoft Graph</span></span>](/graph/service-communications-concept-overview)
- <span data-ttu-id="16172-164">请尝试 [Graph 浏览器](https://developer.microsoft.com/graph/graph-explorer)中的 API。</span><span class="sxs-lookup"><span data-stu-id="16172-164">Try the API in the [Graph Explorer](https://developer.microsoft.com/graph/graph-explorer).</span></span>

<span data-ttu-id="16172-p105">需要更多灵感？请参阅[我们的一些合作伙伴如何使用 Microsoft Graph](https://developer.microsoft.com/en-us/graph/partners)。</span><span class="sxs-lookup"><span data-stu-id="16172-p105">Need more ideas? See [how some of our partners are using Microsoft Graph](https://developer.microsoft.com/en-us/graph/partners).</span></span>