---
title: 使用 Azure AD v2.0 终结点注册应用
description: 应用必须使用 Azure AD 注册。 注册应用会建立一个唯一的应用程序 ID，以及你的应用通过 Azure AD 进行身份验证并获取令牌所用的其他值。
author: jackson-woods
localization_priority: Priority
ms.prod: applications
ms.custom: graphiamtop20
ms.openlocfilehash: c4790651e4f963d1d999fc3347f09ea3293f8791
ms.sourcegitcommit: 9d98d9e9cc1e193850ab9b82aaaf906d70e1378b
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/12/2021
ms.locfileid: "50760733"
---
# <a name="register-an-application-with-the-microsoft-identity-platform"></a><span data-ttu-id="ae6ad-104">向 Microsoft 标识平台注册应用程序</span><span class="sxs-lookup"><span data-stu-id="ae6ad-104">Register an application with the Microsoft identity platform</span></span>

<span data-ttu-id="ae6ad-105">在本页中，介绍了如何通过 Azure 门户中的 **应用注册** 体验添加和注册应用程序，从而让应用能够与 Microsoft 标识平台翔集成并调用 Microsoft Graph。</span><span class="sxs-lookup"><span data-stu-id="ae6ad-105">This page shows you how to add and register an application using the **App registrations** experience in the Azure portal so that your app can be integrated with the Microsoft identity platform and call Microsoft Graph.</span></span> 

> [!VIDEO https://www.youtube-nocookie.com/embed/93j0MmRruFo]

## <a name="register-a-new-application-using-the-azure-portal"></a><span data-ttu-id="ae6ad-106">在 Azure 门户中注册新的应用程序</span><span class="sxs-lookup"><span data-stu-id="ae6ad-106">Register a new application using the Azure portal</span></span>

1. <span data-ttu-id="ae6ad-107">使用工作/学校帐户或 Microsoft 个人帐户登录到 [Azure 门户](https://portal.azure.com)。</span><span class="sxs-lookup"><span data-stu-id="ae6ad-107">Sign in to the [Azure portal](https://portal.azure.com) using either a work or school account or a personal Microsoft account.</span></span>
1. <span data-ttu-id="ae6ad-108">如果你的帐户有权访问多个租户，请在右上角选择该帐户，并将门户会话设置为所需的 Azure AD 租户。</span><span class="sxs-lookup"><span data-stu-id="ae6ad-108">If your account gives you access to more than one tenant, select your account in the top right corner, and set your portal session to the Azure AD tenant that you want.</span></span>
1. <span data-ttu-id="ae6ad-109">在左侧导航窗格中，选择 **Azure Active Directory** 服务，然后选择 **“应用注册”>“新注册”**。</span><span class="sxs-lookup"><span data-stu-id="ae6ad-109">In the left-hand navigation pane, select the **Azure Active Directory** service, and then select **App registrations > New registration**.</span></span>
1. <span data-ttu-id="ae6ad-110">出现“**注册应用程序**”页面后，输入应用程序的注册信息：</span><span class="sxs-lookup"><span data-stu-id="ae6ad-110">When the **Register an application** page appears, enter your application's registration information:</span></span>

   - <span data-ttu-id="ae6ad-111">**名称** - 输入一个会显示给应用用户的有意义的应用程序名称。</span><span class="sxs-lookup"><span data-stu-id="ae6ad-111">**Name** - Enter a meaningful application name that will be displayed to users of the app.</span></span>
   - <span data-ttu-id="ae6ad-112">**支持的帐户类型** - 选择希望应用程序支持的具体帐户。</span><span class="sxs-lookup"><span data-stu-id="ae6ad-112">**Supported account types** - Select which accounts you would like your application to support.</span></span>

       | <span data-ttu-id="ae6ad-113">支持的帐户类型</span><span class="sxs-lookup"><span data-stu-id="ae6ad-113">Supported account types</span></span> | <span data-ttu-id="ae6ad-114">说明</span><span class="sxs-lookup"><span data-stu-id="ae6ad-114">Description</span></span> |
       |-------------------------|-------------|
       | <span data-ttu-id="ae6ad-115">**仅限此组织目录中的帐户**</span><span class="sxs-lookup"><span data-stu-id="ae6ad-115">**Accounts in this organizational directory only**</span></span> | <span data-ttu-id="ae6ad-116">若要生成业务线 (LOB) 应用程序，请选择此选项。</span><span class="sxs-lookup"><span data-stu-id="ae6ad-116">Select this option if you're building a line-of-business (LOB) application.</span></span> <span data-ttu-id="ae6ad-117">如果不在目录中注册应用程序，则此选项不可用。</span><span class="sxs-lookup"><span data-stu-id="ae6ad-117">This option is not available if you're not registering the application in a directory.</span></span><br><br><span data-ttu-id="ae6ad-118">此选项映射到仅限 Azure AD 的单租户。</span><span class="sxs-lookup"><span data-stu-id="ae6ad-118">This option maps to Azure AD only single-tenant.</span></span><br><br><span data-ttu-id="ae6ad-119">这是默认选项，除非你是在目录外部注册应用。</span><span class="sxs-lookup"><span data-stu-id="ae6ad-119">This is the default option unless you're registering the app outside of a directory.</span></span> <span data-ttu-id="ae6ad-120">如果在目录外部注册应用，则默认设置为 Azure AD 多租户和 Microsoft 个人帐户。</span><span class="sxs-lookup"><span data-stu-id="ae6ad-120">In cases where the app is registered outside of a directory, the default is Azure AD multi-tenant and personal Microsoft accounts.</span></span> |
       | <span data-ttu-id="ae6ad-121">**任何组织目录中的帐户**</span><span class="sxs-lookup"><span data-stu-id="ae6ad-121">**Accounts in any organizational directory**</span></span> | <span data-ttu-id="ae6ad-122">若想要面向所有企业和教育客户，请选择此选项。</span><span class="sxs-lookup"><span data-stu-id="ae6ad-122">Select this option if you would like to target all business and educational customers.</span></span><br><br><span data-ttu-id="ae6ad-123">此选项映射到仅限 Azure AD 的多租户。</span><span class="sxs-lookup"><span data-stu-id="ae6ad-123">This option maps to an Azure AD only multi-tenant.</span></span><br><br><span data-ttu-id="ae6ad-124">如果已将应用注册为仅限 Azure AD 的单租户，则可通过“**身份验证**”边栏选项卡将其更新为 Azure AD 多租户，再更新回单租户。</span><span class="sxs-lookup"><span data-stu-id="ae6ad-124">If you registered the app as Azure AD only single-tenant, you can update it to be Azure AD multi-tenant and back to single-tenant through the **Authentication** blade.</span></span> |
       | <span data-ttu-id="ae6ad-125">**任何组织目录中的帐户和 Microsoft 个人帐户**</span><span class="sxs-lookup"><span data-stu-id="ae6ad-125">**Accounts in any organizational directory and personal Microsoft accounts**</span></span> | <span data-ttu-id="ae6ad-126">若要面向最广泛的客户，请选择此选项。</span><span class="sxs-lookup"><span data-stu-id="ae6ad-126">Select this option to target the widest set of customers.</span></span><br><br><span data-ttu-id="ae6ad-127">此选项映射到 Azure AD 多租户和 Microsoft 个人帐户。</span><span class="sxs-lookup"><span data-stu-id="ae6ad-127">This option maps to Azure AD multi-tenant and personal Microsoft accounts.</span></span><br><br><span data-ttu-id="ae6ad-128">如果已将应用注册为 Azure AD 多租户和 Microsoft个人 帐户，则不能在 UI 中更改此项，</span><span class="sxs-lookup"><span data-stu-id="ae6ad-128">If you registered the app as Azure AD multi-tenant and personal Microsoft accounts, you cannot change this in the UI.</span></span> <span data-ttu-id="ae6ad-129">而只能使用应用程序清单编辑器来更改支持的帐户类型。</span><span class="sxs-lookup"><span data-stu-id="ae6ad-129">Instead, you must use the application manifest editor to change the supported account types.</span></span> |

   - <span data-ttu-id="ae6ad-130">**重定向 URI（可选）** - 选择要生成的应用的类型：“**Web**”或“**公共客户端(移动和桌面)**”，然后输入应用程序的重定向 URI（或回复 URL）。</span><span class="sxs-lookup"><span data-stu-id="ae6ad-130">**Redirect URI (optional)** - Select the type of app you're building, **Web** or **Public client (mobile & desktop)**, and then enter the redirect URI (or reply URL) for your application.</span></span>
       - <span data-ttu-id="ae6ad-131">对于 Web 应用程序，请提供应用的基 URL。</span><span class="sxs-lookup"><span data-stu-id="ae6ad-131">For web applications, provide the base URL of your app.</span></span> <span data-ttu-id="ae6ad-132">例如，`http://localhost:31544` 可以是本地计算机上运行的 Web 应用的 URL。</span><span class="sxs-lookup"><span data-stu-id="ae6ad-132">For example, `http://localhost:31544` might be the URL for a web app running on your local machine.</span></span> <span data-ttu-id="ae6ad-133">用户将使用此 URL 登录到 Web 客户端应用程序。</span><span class="sxs-lookup"><span data-stu-id="ae6ad-133">Users would use this URL to sign in to a web client application.</span></span>
       - <span data-ttu-id="ae6ad-134">对于公共客户端应用程序，请提供 Azure AD 返回令牌响应时所用的 URI。</span><span class="sxs-lookup"><span data-stu-id="ae6ad-134">For public client applications, provide the URI used by Azure AD to return token responses.</span></span> <span data-ttu-id="ae6ad-135">输入特定于应用程序的值，例如 `myapp://auth`。</span><span class="sxs-lookup"><span data-stu-id="ae6ad-135">Enter a value specific to your application, such as `myapp://auth`.</span></span>

     <span data-ttu-id="ae6ad-136">若要查看 Web 应用程序或本机应用程序的特定示例，请参阅[快速入门](/azure/active-directory/develop/#quickstarts)。</span><span class="sxs-lookup"><span data-stu-id="ae6ad-136">To see specific examples for web applications or native applications, check out our [quickstarts](/azure/active-directory/develop/#quickstarts).</span></span>

1. <span data-ttu-id="ae6ad-137">完成后，选择“**注册**”。</span><span class="sxs-lookup"><span data-stu-id="ae6ad-137">When finished, select **Register**.</span></span>

    <span data-ttu-id="ae6ad-138">[![在 Azure 门户中注册新的应用程序](./images/auth-v2/new-app-registration-expanded.png)](./images/auth-v2/new-app-registration-expanded.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="ae6ad-138">[![Register a new application in the Azure portal](./images/auth-v2/new-app-registration-expanded.png)](./images/auth-v2/new-app-registration-expanded.png#lightbox)</span></span>

<span data-ttu-id="ae6ad-139">Azure AD 会将唯一的应用程序（客户端）ID 分配给应用，同时你会转到应用程序的“**概览**”页。</span><span class="sxs-lookup"><span data-stu-id="ae6ad-139">Azure AD assigns a unique application (client) ID to your app, and you're taken to your application's **Overview** page.</span></span> <span data-ttu-id="ae6ad-140">若要向应用程序添加其他功能，可选择品牌、证书和机密、API 权限等其他配置选项。</span><span class="sxs-lookup"><span data-stu-id="ae6ad-140">To add additional capabilities to your application, you can select other configuration options including branding, certificates and secrets, API permissions, and more.</span></span>

<span data-ttu-id="ae6ad-141">[![新注册应用的概览页](./images/auth-v2/new-app-overview-page-expanded.png)](./images/auth-v2/new-app-overview-page-expanded.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="ae6ad-141">[![Newly registered app's overview page](./images/auth-v2/new-app-overview-page-expanded.png)](./images/auth-v2/new-app-overview-page-expanded.png#lightbox)</span></span>

## <a name="platform-specific-properties"></a><span data-ttu-id="ae6ad-142">平台特定的属性</span><span class="sxs-lookup"><span data-stu-id="ae6ad-142">Platform-specific properties</span></span>


<span data-ttu-id="ae6ad-p108">下表显示了针对不同类型的应用需要配置和复制的属性。_已分配_ 表示你应该使用由 Azure AD 分配的值。</span><span class="sxs-lookup"><span data-stu-id="ae6ad-p108">The following table shows the properties that you need to configure and copy for different kinds of apps. _Assigned_ means that you should use the value assigned by Azure AD.</span></span>


| <span data-ttu-id="ae6ad-145">应用类型</span><span class="sxs-lookup"><span data-stu-id="ae6ad-145">App type</span></span> | <span data-ttu-id="ae6ad-146">平台</span><span class="sxs-lookup"><span data-stu-id="ae6ad-146">Platform</span></span> | <span data-ttu-id="ae6ad-147">应用程序（客户端）ID</span><span class="sxs-lookup"><span data-stu-id="ae6ad-147">Application (client) ID</span></span> | <span data-ttu-id="ae6ad-148">客户端密码</span><span class="sxs-lookup"><span data-stu-id="ae6ad-148">Client Secret</span></span> | <span data-ttu-id="ae6ad-149">重定向 URI/URL</span><span class="sxs-lookup"><span data-stu-id="ae6ad-149">Redirect URI/URL</span></span> | <span data-ttu-id="ae6ad-150">隐式流</span><span class="sxs-lookup"><span data-stu-id="ae6ad-150">Implicit Flow</span></span> 
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="ae6ad-151">本机/移动</span><span class="sxs-lookup"><span data-stu-id="ae6ad-151">Native/Mobile</span></span> | <span data-ttu-id="ae6ad-152">本机</span><span class="sxs-lookup"><span data-stu-id="ae6ad-152">Native</span></span> | <span data-ttu-id="ae6ad-153">已分配</span><span class="sxs-lookup"><span data-stu-id="ae6ad-153">Assigned</span></span>  | <span data-ttu-id="ae6ad-154">否</span><span class="sxs-lookup"><span data-stu-id="ae6ad-154">No</span></span> | <span data-ttu-id="ae6ad-155">已分配</span><span class="sxs-lookup"><span data-stu-id="ae6ad-155">Assigned</span></span> | <span data-ttu-id="ae6ad-156">否</span><span class="sxs-lookup"><span data-stu-id="ae6ad-156">No</span></span> |
| <span data-ttu-id="ae6ad-157">Web 应用</span><span class="sxs-lookup"><span data-stu-id="ae6ad-157">Web App</span></span> | <span data-ttu-id="ae6ad-158">Web</span><span class="sxs-lookup"><span data-stu-id="ae6ad-158">Web</span></span> | <span data-ttu-id="ae6ad-159">已分配</span><span class="sxs-lookup"><span data-stu-id="ae6ad-159">Assigned</span></span> | <span data-ttu-id="ae6ad-160">是</span><span class="sxs-lookup"><span data-stu-id="ae6ad-160">Yes</span></span> | <span data-ttu-id="ae6ad-161">是</span><span class="sxs-lookup"><span data-stu-id="ae6ad-161">Yes</span></span> | <span data-ttu-id="ae6ad-162">可选</span><span class="sxs-lookup"><span data-stu-id="ae6ad-162">Optional</span></span> <br/><span data-ttu-id="ae6ad-163">Open ID Connect 中间件默认使用混合流（是）</span><span class="sxs-lookup"><span data-stu-id="ae6ad-163">Open ID Connect middleware uses hybrid flow by default (Yes)</span></span> | 
| <span data-ttu-id="ae6ad-164">单页应用 (SPA)</span><span class="sxs-lookup"><span data-stu-id="ae6ad-164">Single Page App (SPA)</span></span> | <span data-ttu-id="ae6ad-165">Web</span><span class="sxs-lookup"><span data-stu-id="ae6ad-165">Web</span></span> | <span data-ttu-id="ae6ad-166">已分配</span><span class="sxs-lookup"><span data-stu-id="ae6ad-166">Assigned</span></span> | <span data-ttu-id="ae6ad-167">是</span><span class="sxs-lookup"><span data-stu-id="ae6ad-167">Yes</span></span> | <span data-ttu-id="ae6ad-168">是</span><span class="sxs-lookup"><span data-stu-id="ae6ad-168">Yes</span></span> | <span data-ttu-id="ae6ad-169">是</span><span class="sxs-lookup"><span data-stu-id="ae6ad-169">Yes</span></span> <br/> <span data-ttu-id="ae6ad-170">SPA 使用 Open ID Connect 隐式流</span><span class="sxs-lookup"><span data-stu-id="ae6ad-170">SPAs use Open ID Connect implicit Flow</span></span> |
| <span data-ttu-id="ae6ad-171">服务/守护程序</span><span class="sxs-lookup"><span data-stu-id="ae6ad-171">Service/Daemon</span></span> | <span data-ttu-id="ae6ad-172">Web</span><span class="sxs-lookup"><span data-stu-id="ae6ad-172">Web</span></span> | <span data-ttu-id="ae6ad-173">已分配</span><span class="sxs-lookup"><span data-stu-id="ae6ad-173">Assigned</span></span> | <span data-ttu-id="ae6ad-174">是</span><span class="sxs-lookup"><span data-stu-id="ae6ad-174">Yes</span></span> | <span data-ttu-id="ae6ad-175">是</span><span class="sxs-lookup"><span data-stu-id="ae6ad-175">Yes</span></span> | <span data-ttu-id="ae6ad-176">否</span><span class="sxs-lookup"><span data-stu-id="ae6ad-176">No</span></span> |

## <a name="next-steps"></a><span data-ttu-id="ae6ad-177">后续步骤</span><span class="sxs-lookup"><span data-stu-id="ae6ad-177">Next steps</span></span>

- <span data-ttu-id="ae6ad-178">详细了解[权限和同意](/azure/active-directory/develop/v2-permissions-and-consent)或查看 Microsoft Graph [权限参考](permissions-reference.md)。</span><span class="sxs-lookup"><span data-stu-id="ae6ad-178">Learn more about [permissions and consent](/azure/active-directory/develop/v2-permissions-and-consent) or view the Microsoft Graph [permissions reference](permissions-reference.md).</span></span>
- <span data-ttu-id="ae6ad-179">若要在应用程序注册中启用其他配置功能（如凭据和权限），并使用户能够从其他租户登录，请参阅以下快速入门：</span><span class="sxs-lookup"><span data-stu-id="ae6ad-179">To enable additional configuration features in your application registration, such as credentials and permissions, and enable sign-in for users from other tenants, see these quickstarts:</span></span>
  - [<span data-ttu-id="ae6ad-180">将客户端应用程序配置为访问 Web API</span><span class="sxs-lookup"><span data-stu-id="ae6ad-180">Configure a client application to access web APIs</span></span>](/azure/active-directory/develop/quickstart-configure-app-access-web-apis)
  - [<span data-ttu-id="ae6ad-181">将应用程序配置为公开 Web API</span><span class="sxs-lookup"><span data-stu-id="ae6ad-181">Configure an application to expose web APIs</span></span>](/azure/active-directory/develop/quickstart-configure-app-expose-web-apis)
  - [<span data-ttu-id="ae6ad-182">修改应用程序支持的帐户</span><span class="sxs-lookup"><span data-stu-id="ae6ad-182">Modify the accounts supported by an application</span></span>](/azure/active-directory/develop/quickstart-modify-supported-accounts)
- <span data-ttu-id="ae6ad-183">选择一个[快速入门](/azure/active-directory/develop/#quickstarts)，了解如何快速构建应用和添加功能，例如获取令牌、刷新令牌、进行用户登录、显示某些用户信息等等。</span><span class="sxs-lookup"><span data-stu-id="ae6ad-183">Choose a [quickstart](/azure/active-directory/develop/#quickstarts) to quickly build an app and add functionality like getting tokens, refreshing tokens, signing in a user, displaying some user info, and more.</span></span>
- <span data-ttu-id="ae6ad-184">详细了解注册的应用程序及其间关系的两个 Azure AD 对象：[应用程序对象和服务主体对象](/azure/active-directory/develop/app-objects-and-service-principals)。</span><span class="sxs-lookup"><span data-stu-id="ae6ad-184">Learn more about the two Azure AD objects that represent a registered application and the relationship between them: [Application objects and service principal objects](/azure/active-directory/develop/app-objects-and-service-principals).</span></span>
- <span data-ttu-id="ae6ad-185">详细了解在通过[应用程序品牌指南](/azure/active-directory/develop/howto-add-branding-in-azure-ad-apps)开发应用时应使用的品牌指南。</span><span class="sxs-lookup"><span data-stu-id="ae6ad-185">Learn more about the branding guidelines you should use when developing apps with [Branding guidelines for applications](/azure/active-directory/develop/howto-add-branding-in-azure-ad-apps).</span></span>