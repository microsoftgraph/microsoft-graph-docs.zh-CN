---
title: 获取 Microsoft Graph Toolkit
description: Get 组件允许你直接在 HTML 中从 Microsoft Graph GET 查询。
localization_priority: Normal
author: nmetulev
ms.openlocfilehash: 8ffb4da00b0d96f29747e7415878146cd80d08cf
ms.sourcegitcommit: ae83b2b372902268517fd17a8b10d6d9add422af
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 07/08/2021
ms.locfileid: "53334771"
---
# <a name="get-component-in-the-microsoft-graph-toolkit"></a><span data-ttu-id="c2e03-103">获取 Microsoft Graph Toolkit</span><span class="sxs-lookup"><span data-stu-id="c2e03-103">Get component in the Microsoft Graph Toolkit</span></span>

<span data-ttu-id="c2e03-104">您可以使用 直接 `mgt-get` 在 HTML 中执行 Microsoft Graph GET 查询。</span><span class="sxs-lookup"><span data-stu-id="c2e03-104">You can use `mgt-get` to make any GET query from Microsoft Graph directly in your HTML.</span></span> <span data-ttu-id="c2e03-105">该组件不提供默认 UI，并且要求你编写模板。</span><span class="sxs-lookup"><span data-stu-id="c2e03-105">The component does not provide a default UI and requires that you write a template.</span></span>

## <a name="example"></a><span data-ttu-id="c2e03-106">示例</span><span class="sxs-lookup"><span data-stu-id="c2e03-106">Example</span></span>

<span data-ttu-id="c2e03-107">下面的示例展示了如何使用 组件 `mgt-get` 显示用户的电子邮件。</span><span class="sxs-lookup"><span data-stu-id="c2e03-107">The following example shows the use of the `mgt-get` component to display a user's emails.</span></span> <span data-ttu-id="c2e03-108">可以使用代码编辑器查看属性 [和属性](#properties-and-attributes) 如何更改组件的行为。</span><span class="sxs-lookup"><span data-stu-id="c2e03-108">You can use the code editor to see how [properties and attributes](#properties-and-attributes) change the behavior of the component.</span></span>

<iframe src="https://mgt.dev/iframe.html?id=components-mgt-get--get-email&source=docs" height="500"></iframe>

[<span data-ttu-id="c2e03-109">在 mgt.dev 中打开此示例</span><span class="sxs-lookup"><span data-stu-id="c2e03-109">Open this example in mgt.dev</span></span>](https://mgt.dev/?path=/story/components-mgt-get--get-email&source=docs)

## <a name="properties-and-attributes"></a><span data-ttu-id="c2e03-110">属性和属性</span><span class="sxs-lookup"><span data-stu-id="c2e03-110">Properties and attributes</span></span>

<span data-ttu-id="c2e03-111">可以使用多个属性更改组件的行为。</span><span class="sxs-lookup"><span data-stu-id="c2e03-111">You can use several attributes to change the behavior of the component.</span></span> <span data-ttu-id="c2e03-112">唯一必需的属性是 `resource` 。</span><span class="sxs-lookup"><span data-stu-id="c2e03-112">The only required attribute is `resource`.</span></span>

| <span data-ttu-id="c2e03-113">属性</span><span class="sxs-lookup"><span data-stu-id="c2e03-113">Attribute</span></span> | <span data-ttu-id="c2e03-114">属性</span><span class="sxs-lookup"><span data-stu-id="c2e03-114">Property</span></span>  | <span data-ttu-id="c2e03-115">说明</span><span class="sxs-lookup"><span data-stu-id="c2e03-115">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="c2e03-116">资源</span><span class="sxs-lookup"><span data-stu-id="c2e03-116">resource</span></span> | <span data-ttu-id="c2e03-117">resource</span><span class="sxs-lookup"><span data-stu-id="c2e03-117">resource</span></span> | <span data-ttu-id="c2e03-118">从 Microsoft 获取的资源Graph (例如 `/me` ，) 。</span><span class="sxs-lookup"><span data-stu-id="c2e03-118">The resource to get from Microsoft Graph (for example, `/me`).</span></span> |
| <span data-ttu-id="c2e03-119">scopes</span><span class="sxs-lookup"><span data-stu-id="c2e03-119">scopes</span></span> | <span data-ttu-id="c2e03-120">scopes</span><span class="sxs-lookup"><span data-stu-id="c2e03-120">scopes</span></span> | <span data-ttu-id="c2e03-121">字符串的可选数组（如果使用 属性）或逗号分隔的范围（如果使用 属性）。</span><span class="sxs-lookup"><span data-stu-id="c2e03-121">Optional array of strings if using the property or a comma delimited scope if using the attribute.</span></span> <span data-ttu-id="c2e03-122">组件将使用这些作用域 (支持) ，以确保用户已同意适当的权限。</span><span class="sxs-lookup"><span data-stu-id="c2e03-122">The component will use these scopes (with a supported provider) to ensure that the user has consented to the right permission.</span></span> |
| <span data-ttu-id="c2e03-123">version</span><span class="sxs-lookup"><span data-stu-id="c2e03-123">version</span></span> | <span data-ttu-id="c2e03-124">version</span><span class="sxs-lookup"><span data-stu-id="c2e03-124">version</span></span> | <span data-ttu-id="c2e03-125">进行 GET 请求时使用的可选 API 版本。</span><span class="sxs-lookup"><span data-stu-id="c2e03-125">Optional API version to use when making the GET request.</span></span> <span data-ttu-id="c2e03-126">默认值为“`v1.0`”。</span><span class="sxs-lookup"><span data-stu-id="c2e03-126">Default is `v1.0`.</span></span>  |
| <span data-ttu-id="c2e03-127">max-pages</span><span class="sxs-lookup"><span data-stu-id="c2e03-127">max-pages</span></span> | <span data-ttu-id="c2e03-128">maxPages</span><span class="sxs-lookup"><span data-stu-id="c2e03-128">maxPages</span></span> | <span data-ttu-id="c2e03-129">支持分页 (的资源的可选页面) 。</span><span class="sxs-lookup"><span data-stu-id="c2e03-129">Optional number of pages (for resources that support paging).</span></span> <span data-ttu-id="c2e03-130">默认值为 3。</span><span class="sxs-lookup"><span data-stu-id="c2e03-130">Default is 3.</span></span> <span data-ttu-id="c2e03-131">将此值设置为 0 将获取所有页面。</span><span class="sxs-lookup"><span data-stu-id="c2e03-131">Setting this value to 0 will get all pages.</span></span>  |
| <span data-ttu-id="c2e03-132">轮询率</span><span class="sxs-lookup"><span data-stu-id="c2e03-132">polling-rate</span></span> | <span data-ttu-id="c2e03-133">pollingRate</span><span class="sxs-lookup"><span data-stu-id="c2e03-133">pollingRate</span></span> | <span data-ttu-id="c2e03-134">可选毫秒数。</span><span class="sxs-lookup"><span data-stu-id="c2e03-134">Optional number of milliseconds.</span></span> <span data-ttu-id="c2e03-135">设置后，组件将按定义的间隔轮询请求 URI 以进行更新。</span><span class="sxs-lookup"><span data-stu-id="c2e03-135">When set, the component will poll the request URI for updates in the defined interval.</span></span> <span data-ttu-id="c2e03-136">如果使用增量查询，轮询将始终查询 delta API。</span><span class="sxs-lookup"><span data-stu-id="c2e03-136">If using a delta query, polling will always query the delta API.</span></span> <span data-ttu-id="c2e03-137">模板仅在数据更改时刷新。</span><span class="sxs-lookup"><span data-stu-id="c2e03-137">The template will only refresh when the data changes.</span></span> |
| <span data-ttu-id="c2e03-138">启用缓存</span><span class="sxs-lookup"><span data-stu-id="c2e03-138">cache-enabled</span></span> | <span data-ttu-id="c2e03-139">cacheEnabled</span><span class="sxs-lookup"><span data-stu-id="c2e03-139">cacheEnabled</span></span> | <span data-ttu-id="c2e03-140">可选属性，类型为 Boolean。</span><span class="sxs-lookup"><span data-stu-id="c2e03-140">Optional Boolean.</span></span> <span data-ttu-id="c2e03-141">设置后，它指示将缓存来自资源的响应。</span><span class="sxs-lookup"><span data-stu-id="c2e03-141">When set, it indicates that the response from the resource will be cached.</span></span> <span data-ttu-id="c2e03-142">Overriden if `refresh()` is called or if is in `pollingRate` use.</span><span class="sxs-lookup"><span data-stu-id="c2e03-142">Overriden if `refresh()` is called or if `pollingRate` is in use.</span></span> <span data-ttu-id="c2e03-143">默认值为“`false`”。</span><span class="sxs-lookup"><span data-stu-id="c2e03-143">Default is `false`.</span></span> |
| <span data-ttu-id="c2e03-144">cache-invalidation-period</span><span class="sxs-lookup"><span data-stu-id="c2e03-144">cache-invalidation-period</span></span> | <span data-ttu-id="c2e03-145">cacheInvalidationPeriod</span><span class="sxs-lookup"><span data-stu-id="c2e03-145">cacheInvalidationPeriod</span></span> | <span data-ttu-id="c2e03-146">可选毫秒数。</span><span class="sxs-lookup"><span data-stu-id="c2e03-146">Optional number of milliseconds.</span></span> <span data-ttu-id="c2e03-147">如果与 一起设置 ，则此值将修改缓存达到其无效时段 `cacheEnabled` 前的延迟。</span><span class="sxs-lookup"><span data-stu-id="c2e03-147">When set in combination with `cacheEnabled`, the delay before the cache reaches its invalidation period will be modified by this value.</span></span> <span data-ttu-id="c2e03-148">默认值为 `0` ，将使用默认无效时段。</span><span class="sxs-lookup"><span data-stu-id="c2e03-148">Default is `0` and will use the default invalidation period.</span></span> |
| <span data-ttu-id="c2e03-149">type</span><span class="sxs-lookup"><span data-stu-id="c2e03-149">type</span></span> | <span data-ttu-id="c2e03-150">type</span><span class="sxs-lookup"><span data-stu-id="c2e03-150">type</span></span> | <span data-ttu-id="c2e03-151">预期响应的可选类型。</span><span class="sxs-lookup"><span data-stu-id="c2e03-151">Optional type of the expected response.</span></span> <span data-ttu-id="c2e03-152">默认值为“`json`”。</span><span class="sxs-lookup"><span data-stu-id="c2e03-152">Default is `json`.</span></span> <span data-ttu-id="c2e03-153">仅在 (终结点上支持或 `json` `image` 支持 `/photo/value$`) 。</span><span class="sxs-lookup"><span data-stu-id="c2e03-153">Supports `json` or `image` (only be supported on endpoints ending with `/photo/value$`).</span></span> |
| <span data-ttu-id="c2e03-154">无</span><span class="sxs-lookup"><span data-stu-id="c2e03-154">N/A</span></span> | <span data-ttu-id="c2e03-155">响应</span><span class="sxs-lookup"><span data-stu-id="c2e03-155">response</span></span> | <span data-ttu-id="c2e03-156">如果请求成功，Microsoft Graph只读响应。</span><span class="sxs-lookup"><span data-stu-id="c2e03-156">Read-only response from Microsoft Graph if request was successful.</span></span>  |
| <span data-ttu-id="c2e03-157">无</span><span class="sxs-lookup"><span data-stu-id="c2e03-157">N/A</span></span> |<span data-ttu-id="c2e03-158">error</span><span class="sxs-lookup"><span data-stu-id="c2e03-158">error</span></span>| <span data-ttu-id="c2e03-159">如果请求失败，Microsoft Graph只读错误。</span><span class="sxs-lookup"><span data-stu-id="c2e03-159">Read-only error from Microsoft Graph if request was not successful.</span></span> |

## <a name="methods"></a><span data-ttu-id="c2e03-160">方法</span><span class="sxs-lookup"><span data-stu-id="c2e03-160">Methods</span></span>

| <span data-ttu-id="c2e03-161">方法</span><span class="sxs-lookup"><span data-stu-id="c2e03-161">Method</span></span> | <span data-ttu-id="c2e03-162">说明</span><span class="sxs-lookup"><span data-stu-id="c2e03-162">Description</span></span> |
| --- | --- |
| <span data-ttu-id="c2e03-163">refresh (force？：boolean) </span><span class="sxs-lookup"><span data-stu-id="c2e03-163">refresh(force?:boolean)</span></span> | <span data-ttu-id="c2e03-164">调用 方法以刷新数据。</span><span class="sxs-lookup"><span data-stu-id="c2e03-164">Call the method to refresh the data.</span></span> <span data-ttu-id="c2e03-165">默认情况下，UI 仅在数据发生更改时更新。</span><span class="sxs-lookup"><span data-stu-id="c2e03-165">By default, the UI will only update if the data changes.</span></span> <span data-ttu-id="c2e03-166">传递 `true` 以强制组件更新。</span><span class="sxs-lookup"><span data-stu-id="c2e03-166">Pass `true` to force the component to update.</span></span>  |

## <a name="events"></a><span data-ttu-id="c2e03-167">活动</span><span class="sxs-lookup"><span data-stu-id="c2e03-167">Events</span></span>

<span data-ttu-id="c2e03-168">事件</span><span class="sxs-lookup"><span data-stu-id="c2e03-168">Event</span></span> | <span data-ttu-id="c2e03-169">何时发出</span><span class="sxs-lookup"><span data-stu-id="c2e03-169">When is it emitted</span></span> | <span data-ttu-id="c2e03-170">自定义数据</span><span class="sxs-lookup"><span data-stu-id="c2e03-170">Custom data</span></span> | <span data-ttu-id="c2e03-171">Cancelable</span><span class="sxs-lookup"><span data-stu-id="c2e03-171">Cancelable</span></span> | <span data-ttu-id="c2e03-172">气泡</span><span class="sxs-lookup"><span data-stu-id="c2e03-172">Bubbles</span></span> | <span data-ttu-id="c2e03-173">使用自定义模板</span><span class="sxs-lookup"><span data-stu-id="c2e03-173">Works with custom template</span></span>
------|-------------------|--------------|:-----------:|:---------:|:---------------------------:|
`dataChange` | <span data-ttu-id="c2e03-174">在组件加载其数据后触发。</span><span class="sxs-lookup"><span data-stu-id="c2e03-174">Fired after the component loaded its data.</span></span> | <span data-ttu-id="c2e03-175">`{ response: any, error: any }`.</span><span class="sxs-lookup"><span data-stu-id="c2e03-175">`{ response: any, error: any }`.</span></span> <span data-ttu-id="c2e03-176">`response`属性包含从 Microsoft Graph。</span><span class="sxs-lookup"><span data-stu-id="c2e03-176">The `response` property contains the response retrieved from Microsoft Graph.</span></span> <span data-ttu-id="c2e03-177">`error`属性包含有关发生错误的信息</span><span class="sxs-lookup"><span data-stu-id="c2e03-177">The `error` property contains information about the error if one occurred</span></span> | <span data-ttu-id="c2e03-178">否</span><span class="sxs-lookup"><span data-stu-id="c2e03-178">No</span></span> | <span data-ttu-id="c2e03-179">否</span><span class="sxs-lookup"><span data-stu-id="c2e03-179">No</span></span> | <span data-ttu-id="c2e03-180">是</span><span class="sxs-lookup"><span data-stu-id="c2e03-180">Yes</span></span>

> [!TIP]
> <span data-ttu-id="c2e03-181">有关 属性中返回的数据详细信息，请参阅你在 Get 组件的 属性中使用的 `response` API 的 `resource` API 引用。</span><span class="sxs-lookup"><span data-stu-id="c2e03-181">For more information about the data returned in the `response` property see the API reference of the API that you used in the `resource` property of the Get component.</span></span>

<span data-ttu-id="c2e03-182">有关处理事件的信息，请参阅 [事件](../customize-components/events.md)。</span><span class="sxs-lookup"><span data-stu-id="c2e03-182">For more information about handling events, see [events](../customize-components/events.md).</span></span>

## <a name="templates"></a><span data-ttu-id="c2e03-183">模板</span><span class="sxs-lookup"><span data-stu-id="c2e03-183">Templates</span></span>

<span data-ttu-id="c2e03-184">`mgt-get`组件支持[多个](../customize-components/templates.md)可用于定义外观的模板。</span><span class="sxs-lookup"><span data-stu-id="c2e03-184">The `mgt-get` component supports several [templates](../customize-components/templates.md) that you can use to define the look and feel.</span></span> <span data-ttu-id="c2e03-185">若要指定模板，请包含组件 `<template>` 中的元素，将值 `data-type` 设置为以下值之一。</span><span class="sxs-lookup"><span data-stu-id="c2e03-185">To specify a template, include a `<template>` element inside a component and set the `data-type` value to one of the following.</span></span>

| <span data-ttu-id="c2e03-186">数据类型</span><span class="sxs-lookup"><span data-stu-id="c2e03-186">Data type</span></span> | <span data-ttu-id="c2e03-187">数据上下文</span><span class="sxs-lookup"><span data-stu-id="c2e03-187">Data context</span></span> | <span data-ttu-id="c2e03-188">说明</span><span class="sxs-lookup"><span data-stu-id="c2e03-188">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="c2e03-189">default</span><span class="sxs-lookup"><span data-stu-id="c2e03-189">default</span></span> | <span data-ttu-id="c2e03-190">来自 Microsoft Graph。</span><span class="sxs-lookup"><span data-stu-id="c2e03-190">The response from Microsoft Graph.</span></span> | <span data-ttu-id="c2e03-191">需要默认模板才能呈现来自 Microsoft Graph。</span><span class="sxs-lookup"><span data-stu-id="c2e03-191">The default template is required to render the data coming from Microsoft Graph.</span></span> |
| <span data-ttu-id="c2e03-192">值</span><span class="sxs-lookup"><span data-stu-id="c2e03-192">value</span></span> | <span data-ttu-id="c2e03-193">返回的数组的数据 `value` 项</span><span class="sxs-lookup"><span data-stu-id="c2e03-193">Data item from the returned `value` array</span></span> | <span data-ttu-id="c2e03-194">当预期来自图形的响应包含项目数组（如消息、文件或用户）时，请使用模板而不是 `value` `default` **模板**。  </span><span class="sxs-lookup"><span data-stu-id="c2e03-194">Use the `value` template instead of the `default` template when expecting the response from the graph to contain an array of items - such as **messages**, **files**, or **users**.</span></span> <span data-ttu-id="c2e03-195">将自动 `value` 为资源返回的每个项目重复模板。</span><span class="sxs-lookup"><span data-stu-id="c2e03-195">The `value` template will automatically be repeated for each item returned by the resource.</span></span> <span data-ttu-id="c2e03-196">模板还会在准备好项目后立即开始呈现 (`value` 默认模板) 。</span><span class="sxs-lookup"><span data-stu-id="c2e03-196">The `value` template will also start rendering the items as soon as they are ready (unlike the default template).</span></span>|
| <span data-ttu-id="c2e03-197">error</span><span class="sxs-lookup"><span data-stu-id="c2e03-197">error</span></span> | <span data-ttu-id="c2e03-198">Microsoft 错误Graph。</span><span class="sxs-lookup"><span data-stu-id="c2e03-198">The error from Microsoft Graph.</span></span> | <span data-ttu-id="c2e03-199">如果提出请求出错，将使用此模板。</span><span class="sxs-lookup"><span data-stu-id="c2e03-199">This template will be used if there is an error making the request.</span></span> |
| <span data-ttu-id="c2e03-200">loading</span><span class="sxs-lookup"><span data-stu-id="c2e03-200">loading</span></span> | <span data-ttu-id="c2e03-201">无</span><span class="sxs-lookup"><span data-stu-id="c2e03-201">N/A</span></span> | <span data-ttu-id="c2e03-202">请求时使用此模板。</span><span class="sxs-lookup"><span data-stu-id="c2e03-202">This template is used while the request is being made.</span></span> |

## <a name="microsoft-graph-permissions"></a><span data-ttu-id="c2e03-203">Microsoft Graph 权限</span><span class="sxs-lookup"><span data-stu-id="c2e03-203">Microsoft Graph permissions</span></span>

<span data-ttu-id="c2e03-204">此组件所需的权限取决于你要通过 Microsoft Graph 检索到的数据。</span><span class="sxs-lookup"><span data-stu-id="c2e03-204">Permissions required by this component depend on the data that you want to retrieve with it from Microsoft Graph.</span></span> <span data-ttu-id="c2e03-205">有关权限详细信息，请参阅 Microsoft Graph[权限参考](../../permissions-reference.md)。</span><span class="sxs-lookup"><span data-stu-id="c2e03-205">For more information about permissions, see the Microsoft Graph [permissions reference](../../permissions-reference.md).</span></span>

## <a name="authentication"></a><span data-ttu-id="c2e03-206">身份验证</span><span class="sxs-lookup"><span data-stu-id="c2e03-206">Authentication</span></span>

<span data-ttu-id="c2e03-207">该控件使用身份验证文档中介绍的全局身份验证提供程序[](../providers/providers.md)获取所需数据。</span><span class="sxs-lookup"><span data-stu-id="c2e03-207">The control uses the global authentication provider described in the [authentication documentation](../providers/providers.md) to fetch the required data.</span></span>

## <a name="cache"></a><span data-ttu-id="c2e03-208">缓存</span><span class="sxs-lookup"><span data-stu-id="c2e03-208">Cache</span></span>

<span data-ttu-id="c2e03-209">若要启用和配置缓存，请使用 `cacheEnabled` 和 `cacheInvalidationPeriod` 属性。</span><span class="sxs-lookup"><span data-stu-id="c2e03-209">To enable and configure the cache, use the `cacheEnabled` and `cacheInvalidationPeriod` properties.</span></span> <span data-ttu-id="c2e03-210">默认情况下， `mgt-get` 该组件不缓存任何响应。</span><span class="sxs-lookup"><span data-stu-id="c2e03-210">By default, the `mgt-get` component does not cache any responses.</span></span>

|<span data-ttu-id="c2e03-211">对象存储</span><span class="sxs-lookup"><span data-stu-id="c2e03-211">Object store</span></span>|<span data-ttu-id="c2e03-212">缓存数据</span><span class="sxs-lookup"><span data-stu-id="c2e03-212">Cached data</span></span>|<span data-ttu-id="c2e03-213">备注</span><span class="sxs-lookup"><span data-stu-id="c2e03-213">Remarks</span></span>|
|-----------|-----------|-------|
|`response`|<span data-ttu-id="c2e03-214">从 Microsoft 查询Graph为 属性中指定的查询 `resource` 的完整响应`mgt-get`</span><span class="sxs-lookup"><span data-stu-id="c2e03-214">Complete response retrieved from Microsoft Graph for the query specified in the `resource` property of `mgt-get`</span></span>|

<span data-ttu-id="c2e03-215">有关详细信息[Caching](../customize-components/cache.md)请参阅 Caching。</span><span class="sxs-lookup"><span data-stu-id="c2e03-215">See [Caching](../customize-components/cache.md) for more details.</span></span>
